{"ast":null,"code":"var _jsxFileName = \"/Users/jordanbruner/Desktop/Projects/EmptyStillsFront/emptysills/src/PlantList/index.js\";\nimport React, { Component, Fragment } from 'react';\nimport NavBar from '../Nav';\nimport { Button } from 'semantic-ui-react';\nimport { Link } from 'react-router-dom';\n\nclass Profile extends Component {\n  constructor() {\n    super();\n\n    this.getUser = async () => {\n      try {\n        // console.log(\"get user function\");\n        const userId = localStorage.getItem('sessionUserId');\n        const user = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/users/${userId}`, {\n          credentials: 'include',\n          method: \"GET\"\n        });\n        const parsedUser = await user.json(); // console.log(\"currentUser:\", parsedUser);\n\n        this.setState({\n          gold: parsedUser.gold\n        });\n      } catch (err) {\n        // console.log(err);\n        this.props.history.push('/');\n      }\n    };\n\n    this.getCompanions = async () => {\n      try {\n        // console.log('get companions function');\n        const companions = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/companions/`, {\n          method: \"GET\",\n          credentials: 'include'\n        });\n        const parsedCompanions = await companions.json(); // console.log(parsedCompanions.data)\n\n        for (let i = 0; i < parsedCompanions.data.length; i++) {\n          // console.log(parsedCompanions.data[i].user.id)\n          // console.log(parsedCompanions.data[i].user.id === localStorage.getItem('sessionUserId'))\n          if (parsedCompanions.data[i].user.id.toString() === localStorage.getItem('sessionUserId').toString()) {\n            this.setState({\n              companions: [...this.state.companions, parsedCompanions.data[i]]\n            });\n          }\n        } // console.log(this.state.companions);\n\n      } catch (err) {\n        // console.log(err)\n        this.props.history.push('/');\n      }\n    };\n\n    this.removeCompanions = async id => {\n      const deleteCompanionResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/companions/${id}/`, {\n        method: 'DELETE',\n        credentials: 'include'\n      });\n      const deleteCompanionParsed = await deleteCompanionResponse.json();\n      console.log(deleteCompanionParsed);\n      this.setState({\n        companions: this.state.companions.filter(companion => companion.id !== id)\n      });\n    };\n\n    this.openCompanionModal = async companion => {\n      await this.setState({\n        viewingCompanion: true,\n        companionViewed: companion\n      });\n    };\n\n    this.closeModal = async () => {\n      await this.setState({\n        viewingCompanion: false\n      });\n    };\n\n    this.state = {\n      companions: [],\n      gold: '',\n      viewingCompanion: false,\n      companionViewed: []\n    };\n  }\n\n  componentDidMount() {\n    this.getUser();\n    this.getCompanions();\n  }\n\n  render() {\n    return React.createElement(Fragment, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90\n      },\n      __self: this\n    }, React.createElement(NavBar, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91\n      },\n      __self: this\n    }), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92\n      },\n      __self: this\n    }, \"Profile\"), React.createElement(\"h1\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 93\n      },\n      __self: this\n    }, \"Gold: \", this.state.gold), React.createElement(Link, {\n      to: \"/create\",\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 94\n      },\n      __self: this\n    }, React.createElement(Button, {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 95\n      },\n      __self: this\n    }, \"Create new companion\")), React.createElement(PartyMembers, {\n      companions: this.state.companions,\n      openModal: this.openCompanionModal,\n      removeCompanion: this.removeCompanions,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 97\n      },\n      __self: this\n    }), React.createElement(ShowCompanion, {\n      open: this.state.viewingCompanion,\n      companion: this.state.companionViewed,\n      closeModal: this.closeModal,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 98\n      },\n      __self: this\n    }));\n  }\n\n}\n\nexport default Profile;","map":{"version":3,"sources":["/Users/jordanbruner/Desktop/Projects/EmptyStillsFront/emptysills/src/PlantList/index.js"],"names":["React","Component","Fragment","NavBar","Button","Link","Profile","constructor","getUser","userId","localStorage","getItem","user","fetch","process","env","REACT_APP_API_URL","credentials","method","parsedUser","json","setState","gold","err","props","history","push","getCompanions","companions","parsedCompanions","i","data","length","id","toString","state","removeCompanions","deleteCompanionResponse","deleteCompanionParsed","console","log","filter","companion","openCompanionModal","viewingCompanion","companionViewed","closeModal","componentDidMount","render"],"mappings":"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","sourcesContent":["import React, {Component, Fragment} from 'react';\nimport NavBar from '../Nav';\nimport {Button} from 'semantic-ui-react'\nimport {Link} from 'react-router-dom'\n\nclass Profile extends Component{\n    constructor(){\n        super();\n        this.state = {\n            companions: [],\n            gold: '',\n            viewingCompanion: false,\n            companionViewed: []\n        }\n    }\n    componentDidMount(){\n        this.getUser();\n        this.getCompanions();\n    }\n    getUser = async () => {\n        try{\n            // console.log(\"get user function\");\n            const userId = localStorage.getItem('sessionUserId');\n            const user = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/users/${userId}`, {\n                credentials: 'include',\n                method: \"GET\"\n            })\n\n            const parsedUser = await user.json()\n            // console.log(\"currentUser:\", parsedUser);\n            this.setState({\n                gold: parsedUser.gold\n            })\n\n        } catch(err){\n            // console.log(err);\n            this.props.history.push('/')\n        }\n    }\n    getCompanions = async () => {\n        try{\n            // console.log('get companions function');\n            const companions = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/companions/`, {\n                method: \"GET\",\n                credentials: 'include'\n            });\n\n            const parsedCompanions = await companions.json()\n\n            // console.log(parsedCompanions.data)\n\n            for(let i=0; i<parsedCompanions.data.length; i++){\n                // console.log(parsedCompanions.data[i].user.id)\n                // console.log(parsedCompanions.data[i].user.id === localStorage.getItem('sessionUserId'))\n                if(parsedCompanions.data[i].user.id.toString() === localStorage.getItem('sessionUserId').toString()){\n                    this.setState({\n                        companions: [...this.state.companions, parsedCompanions.data[i]]\n                    })\n                }\n            }\n            // console.log(this.state.companions);\n\n        } catch(err){\n            // console.log(err)\n            this.props.history.push('/')\n        }\n    }\n    removeCompanions = async (id) => {\n        const deleteCompanionResponse = await fetch(`${process.env.REACT_APP_API_URL}/api/v1/companions/${id}/`, {\n            method: 'DELETE',\n            credentials: 'include'\n        })\n        const deleteCompanionParsed = await deleteCompanionResponse.json()\n        console.log(deleteCompanionParsed);\n        this.setState({companions: this.state.companions.filter((companion) => companion.id !== id )})\n    }\n    openCompanionModal = async (companion) => {\n        await this.setState({\n            viewingCompanion: true,\n            companionViewed: companion\n        })\n    }\n    closeModal = async () => {\n        await this.setState({\n            viewingCompanion: false\n        })\n    }\n    render(){\n        return(\n            <Fragment>\n                <NavBar />\n                <h1>Profile</h1>\n                <h1>Gold: {this.state.gold}</h1>\n                <Link to=\"/create\">\n                    <Button>Create new companion</Button>\n                </Link>\n                <PartyMembers companions={this.state.companions} openModal={this.openCompanionModal} removeCompanion={this.removeCompanions} />\n                <ShowCompanion open={this.state.viewingCompanion} companion={this.state.companionViewed} closeModal={this.closeModal} />\n            </Fragment>\n        )\n    }\n}\n\nexport default Profile;"]},"metadata":{},"sourceType":"module"}